<div id="interno2">
<% title "CRIANÇAS", :id =>"criancas" %>
 <div class="tabs">
   <div id="caixa_titulo">
    <font size="3"><strong>RELATÓRIO GERAL DE DEMANDA ESCOLAR</strong></font><br/>
   </div>
  <div class="tabs">
 <fieldset>
   <legend><font size=2><b>DEMANDA POR REGIÃO</b></font></legend>
     <table bgcolor="#DCDCDC" width="70%"align="center">
         <tr bgcolor="#DCDCDC" >
            <th width="25%">Região</th>
            <th width="2%">Total</th>
            <th width="1%" bgcolor="#DCDCDC" ></th>
            <th width="25%">Região</th>
            <th width="2%">Total</th>
            <th width="1%" bgcolor="#DCDCDC" ></th>
            <th width="25%">Região</th>
            <th width="2%">Total</th>

        </tr>
        <% totalregiao = 0 %>
        <tr bgcolor="#F5F5F5" >
             <th align="center"> São Jerônimo</th>
             <th align="center"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 1"]).count %></th>
             <% totalregiao = totalregiao + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 1"]).count %>
             <th></th>
             <th align="center"> Cidade Jardim</th>
             <th align="center"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 2"]).count %></th>
             <% totalregiao = totalregiao + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 2"]).count %>
             <th></th>
             <th align="center"> São Vito / Jaguari</th>
             <th align="center"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 3"]).count %></th>
             <% totalregiao = totalregiao + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 3"]).count %>
        </tr>
        <tr bgcolor="#F5F5F5">
             <th align="center"> Zanaga</th>
             <th align="center"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 4"]).count %></th>
             <% totalregiao = totalregiao + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 4"]).count %>
              <th></th>
             <th align="center"> Jardim Ipiranga</th>
             <th align="center"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 5"]).count %></th>
             <% totalregiao = totalregiao + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 5"]).count %>
             <th></th>
             <th align="center"> Centro</th>
             <th align="center"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 6"]).count %></th>
             <% totalregiao = totalregiao + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 6"]).count %>
        </tr>
        <tr bgcolor="#F5F5F5">
             <th align="center"> Praia Azul</th>
             <th align="center"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 7"]).count %></th>
             <% totalregiao = totalregiao + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 7"]).count %>
             <th></th>
             <th align="center"> Parque da Nações</th>
             <th align="center"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 8"]).count %></th>
             <% totalregiao = totalregiao + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 8"]).count %>
             <th></th>
             <th align="center"> Alvorada</th>
             <th align="center"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 9"]).count %></th>
             <% totalregiao = totalregiao + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and regiao_id = 9"]).count %>
       </tr>
     </table>
     <table bgcolor="#DCDCDC" width="70%" align="center">
      <tr >
        <td align="right"><b>TOTAL GERAL INSCRIÇÕES: </b>
            <font color ="red "size="2"><b><%=totalregiao %>&nbsp&nbsp&nbsp</b></font>
          </td>
      </tr>
    </table>
  </fieldset>
<% b1=0%>
<% b2=0%>
<% m1=0%>
<% m2=0%>
<% n1=0%>
<% n2=0%>
 <fieldset>
   <legend><font size=2><b>DEMANDA GERAL POR UNIDADE</b></font></legend>
      <table bgcolor="#DCDCDC" width="100%"align="center">
        <tr>
          <td>
            <table>
                <tr bgcolor="#DCDCDC" >
                    <th width="35%">Unidade</th>
                    <th width="2%">Total</th>
                </tr>
                 <%cont1=0%>
                 <% @unidades11.each do |unidade| %>
                 <% num =  Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and opcao1 = ?", unidade.nome]).count%>
                 <% cont1 = cont1+num%>
                 <tr bgcolor="#C6BBBB">
                   <th width="30%" align="left"><%=h unidade.nome%></th>
                   <th width="2%"></th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Berçario I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 1 and opcao1 = ?", unidade.nome]).count %>
                                  <%b1 = b1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 1 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Berçario II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 2 and opcao1 = ?", unidade.nome]).count %>
                                  <%b2 = b2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 2 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Maternal I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and (grupo_id= 4 or grupo_id = 3) and opcao1 = ?", unidade.nome]).count %>
                                 <%m1 = m1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and (grupo_id= 4 or grupo_id = 3) and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Maternal II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 5 and opcao1 = ?", unidade.nome]).count %>
                                <%m2 = m2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 5 and opcao1 = ?", unidade.nome]).count%> </th>                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Nivel I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 6 and opcao1 = ?", unidade.nome]).count %>
                                <%n1 = n1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 6 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Nivel II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 7 and opcao1 = ?", unidade.nome]).count %>
                                <%n2 = n2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 7 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr>
                   <th align="right">Total</th>
                   <th width="2%">  <%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and opcao1 = ?", unidade.nome]).count %></th>
                 </tr>
                <%end%>
                 <tr>
                   <td colspan="2" align="right"><b>Total Inscrições: </b>
                            <font color ="red "size="2"><b><%= cont1 %></b></font></td>
                 </tr>
            </table>
           </td>
           <td valign="top">
            <table>
                <tr bgcolor="#DCDCDC" >
                    <th width="35%">Unidade</th>
                    <th width="2%">Total</th>
                </tr>
                 <%cont2=0%>
                 <% @unidades12.each do |unidade| %>
                 <% num =  Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and opcao1 = ?", unidade.nome]).count %>
                 <%cont2 = cont2+num%>
                 <tr bgcolor="#C6BBBB">
                   <th width="30%" align="left"><%=h unidade.nome%></th>
                    <th width="2%"></th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Berçario I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 1 and opcao1 = ?", unidade.nome]).count %>
                                  <%b1 = b1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 1 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Berçario II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 2 and opcao1 = ?", unidade.nome]).count %>
                                 <%b2 = b2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 2 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Maternal I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and (grupo_id= 4 or grupo_id = 3) and opcao1 = ?", unidade.nome]).count %>
                                  <%m1 = m1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and (grupo_id= 4 or grupo_id = 3) and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Maternal II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 5 and opcao1 = ?", unidade.nome]).count %>
                                <%m2 = m2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 5 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Nivel I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 6 and opcao1 = ?", unidade.nome]).count %>
                                <%n1 = n1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 6 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Nivel II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 7 and opcao1 = ?", unidade.nome]).count %>
                                <%n2 = n2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 2 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr>
                   <th align="right">Total</th>
                   <th width="2%">  <%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and opcao1 = ?", unidade.nome]).count %></th>
                 </tr>

                <%end%>
                 <tr>
                   <td colspan="2" align="right"><b>Total Inscrições: </b>
                            <font color ="red "size="2"><b><%= cont2 %></b></font></td>
                 </tr>

            </table>
           </td>
           <td valign="top">
            <table>
                <tr bgcolor="#DCDCDC" >
                    <th width="35%">Unidade</th>
                    <th width="2%">Total</th>
                </tr>
                 <%cont3=0%>
                 <% @unidades13.each do |unidade| %>
                 <% num =  Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and opcao1 = ?", unidade.nome]).count %>
                 <%cont3 = cont3+num%>
                 <tr bgcolor="#C6BBBB">
                   <th width="30%" align="left"><%=h unidade.nome%></th>
                    <th width="2%"></th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Berçario I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 1 and opcao1 = ?", unidade.nome]).count %>
                                  <%b1 = b1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 1 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Berçario II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 2 and opcao1 = ?", unidade.nome]).count %>
                                   <%b2 = b2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 2 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Maternal I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and (grupo_id= 4 or grupo_id = 3) and opcao1 = ?", unidade.nome]).count %>
                                  <%m1 = m1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and (grupo_id= 4 or grupo_id = 3) and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Maternal II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 5 and opcao1 = ?", unidade.nome]).count %>
                                <%m2 = m2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 5 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Nivel I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 6 and opcao1 = ?", unidade.nome]).count %>
                                <%n1 = n1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 6 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Nivel II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 7 and opcao1 = ?", unidade.nome]).count %>
                                <%n2 = n2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 7 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr>
                   <th align="right">Total</th>
                   <th width="2%">  <%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and opcao1 = ?", unidade.nome]).count %></th>
                 </tr>
                <%end%>
                 <tr>
                   <td colspan="2" align="right"><b>Total Inscrições: </b>
                            <font color ="red "size="2"><b><%= cont3 %></b></font></td>
                 </tr>
            </table>
           </td>
           <td valign="top">
            <table>
                <tr bgcolor="#DCDCDC" >
                    <th width="35%">Unidade</th>
                    <th width="2%">Total</th>
                </tr>
                 <%cont4=0%>
                 <% @unidades14.each do |unidade| %>
                 <% num =  Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and opcao1 = ?", unidade.nome]).count %>
                 <%cont4 = cont4+num%>
                 <tr bgcolor="#C6BBBB">
                   <th width="30%" align="left"><%=h unidade.nome%></th>
                    <th width="2%"></th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Berçario I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 1 and opcao1 = ?", unidade.nome]).count %>
                                  <%b1 = b1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 1 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Berçario II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 2 and opcao1 = ?", unidade.nome]).count %>
                                 <%b2 = b2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 2 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Maternal I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and (grupo_id= 4 or grupo_id = 3) and opcao1 = ?", unidade.nome]).count %>
                                  <%m1 = m1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and (grupo_id= 4 or grupo_id = 3) and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Maternal II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 5 and opcao1 = ?", unidade.nome]).count %>
                                <%m2 = m2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 5 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Nivel I</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 6 and opcao1 = ?", unidade.nome]).count %>
                                  <%n1 = n1 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 6 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr bgcolor="#F5F5F5">
                   <th align="left">&nbsp&nbsp&nbsp&nbsp&nbsp - Nivel II</th>
                   <th width="2%"><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 7 and opcao1 = ?", unidade.nome]).count %>
                                <%n2 = n2 + Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and grupo_id= 7 and opcao1 = ?", unidade.nome]).count%> </th>
                 </tr>
                 <tr>
                   <th align="right">Total</th>
                   <th><%= Crianca.find(:all, :conditions => ["status = 'NA_DEMANDA' and opcao1 = ?", unidade.nome]).count %></th>
                 </tr>

                <%end%>
                 <tr>
                   <td colspan="2" align="right"><b>Total Inscrições: </b>
                            <font color ="red "size="2"><b><%= cont4 %></b></font></td>
                 </tr>
            </table>
           </td>
        </tr>
      </table>
   </fieldset>
<fieldset>
   <legend><font size=2><b>DEMANDA GERAL POR CLASSE</b></font></legend>
      <table bgcolor="#DCDCDC" width="100%"align="center">
        <tr bgcolor="#F5F5F5">
          <th>- BERÇARIO I:</th>
          <th>- <%= b1%>  </th>
          <th>- BERÇARIO II: </th>
          <th><%= b2%>  </th>
          <th>- MATERNAL I: </th>
          <th><%= m1%>  </th>
          <th>- MATERNAL II: </th>
          <th><%= m2%>  </th>
          <th>- NÍVEL I: </th>
          <th><%= n1%>  </th>
          <th>- NÍVEL II: </th>
          <th><%= n2%>  </th>
        </tr>
      </table>
</fieldset>
<fieldset>
    <table bgcolor="#DCDCDC" width="100%"align="center">
       <tr>
        <td><b><%= button_to 'Imprimir', onclick="javascript:MM_openBrWindow('#{impressao_geral_criancas_path}','impressao', 'scrollbars=yes');", :title => "Imprimir" %> </b></td>
          <% tt= 0 %>
          <% tt= cont1+ cont2+ cont3+ cont4 %>
        <td colspan="3" align="right"><b>TOTAL GERAL INSCRIÇÕES: </b>
            <font color ="red "size="2"><b><%=  tt %></b></font>
          </td>
      </tr>
      </table>
 </fieldset>
  <table>
    <tr>
     <td width="6%"align="left" ><%= button_to 'Fechar', home_path, {:method => "get"}  %></td>
     <td align="left"><%= button_to 'Consultar',  :title => "Consultar" %></td>
    </tr>
  </table>
 </div>
 </div>
  <br/>
</div>


